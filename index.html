<!-- Aleksey Bykhun -->
<!DOCTYPE html>
<html>
  <head>
    <title>Follow Head Demo - A-Frame</title>
    <meta
      name="description"
      content="Vaporwave aesthetic Asteroid Demo."
    />
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@3.3.0/dist/aframe-extras.min.js"></script>

    <script>
      AFRAME.registerComponent("follow-head", {
        tick: (function() {
          // let coeff = 1 / 90; // second per tick
          // let speed = new THREE.Vector3();
          // window.followHeadObject = this.el.object3D;
          
          return function() {
            // speed.z += 0.01 * coeff; // (m/s2) / (sec/tick) = m/s per tick

            // console.log('this.el.object3D.position', this.el.object3D.position);
            
          };
        })()
      });

      // AFRAME.registerComponent("debug-text", {
      //   tick: function() {
      //     this.el.setAttribute(
      //       "value",
      //       `
      //       alpha:\t\t\t\t${window.alpha}
      //       zero_alpha:\t\t${window.zero_alpha}
      //       speed:\t\t\t\t${window.speed.toArray()}
      //       acceleration:\t${window.acceleration.toArray()}
      //     `
      //     );
      //   }
      // });
    </script>
  </head>
  <body>
    <a-scene stats>
      <a-assets>
        <img
          id="pink"
          src="https://img.gs/bbdkhfbzkk/stretch/http://i.imgur.com/1hyyIUi.jpg"
          crossorigin="anonymous"
        />
        <img
          src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png"
          id="grid"
          crossorigin="anonymous"
        />
        <img
          src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg"
          id="chrome"
          crossorigin="anonymous"
        />
        <img
          id="sky"
          src="https://cdn.glitch.com/03242f16-d041-41e4-a30f-c084435bc64e%2Fstars_texture2942.jpg?v=1607731920565"
          crossorigin="anonymous"
        />
        
<!--         <a-asset-item
          id="asteroid"
          src="https://cdn.glitch.com/03242f16-d041-41e4-a30f-c084435bc64e%2Fasteroid.gltf?v=1607734890848"
          crossorigin="anonymous"
        ></a-asset-item> -->
      </a-assets>

      <a-entity
        position="0 -5 0"
        gltf-model="https://cdn.glitch.com/03242f16-d041-41e4-a30f-c084435bc64e%2Fasteroid.gltf?v=1607756225977"
        follow-head
      ></a-entity>

      <!-- Grid -->
      <a-entity
        geometry="primitive: plane; width: 10000; height: 10000;"
        rotation="-90 0 0"
        material="src: #grid; repeat: 10000 10000; transparent: true;metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"
      ></a-entity>

      <a-entity
        light="color: #ccccff; intensity: 1; type: ambient;"
        visible=""
      ></a-entity>
      <a-entity
        light="color: #ffaaff; intensity: 1.5"
        position="5 5 5"
      ></a-entity>
      <a-entity
        light="color: white; intensity: 0.5"
        position="-5 5 15"
      ></a-entity>

      <a-entity light="color: white; type: ambient;"></a-entity>

      <!--        rotation="0 -90 0" -->
      <a-sky src="#sky"></a-sky>

      <a-entity id="rig" position="0 1.6 0" sync-acceleration>
        <a-text
          value="Hello World"
          id="debug-text"
          position="0 0 -1"
          debug-text
        ></a-text>

        <!--         <a-sphere position="0 1 -1"></a-sphere> -->

        <a-entity oculus-touch-controls="hand: left"></a-entity>
        <a-entity oculus-touch-controls="hand: right"></a-entity>

        <a-entity id="camera" camera look-controls wasd-controls></a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
